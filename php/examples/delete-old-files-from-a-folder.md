[&larr;](readme.md "Примеры") Удаление старых файлов из папки
-------------------------------------------------------------

Небольшой PHP скрипт для удаления старых и ненужных файлов (бекапы, временные картинки, прайсы и т.п.) с сервера из указанной папки. Можно использовать вместе с Cron.

> Перед манипуляциями с файлами на сервере не забываем сделать бекап.

```php
<?php
$folder = 'backup';
$timeDelete = 60*60*24*30;

if($dir = opendir($folder)) {
    while( ($file = readdir($dir)) !== false ) {
        if($file != "." && $file != "..") {
            $fileTime = filemtime($folder.'/'.$file);
            if (time()-$fileTime > $timeDelete) {
                unlink($folder . '/' . $file);
            }
        }
    }
}

closedir($dir);
```

Для начала создаем файл на сервере с вышенаписанным кодом.

В переменной `$folder` указываем папку из которой необходимо будет удалять старые файлы. Путь к папке указывается относительно скрипта (без первого слеша).

В переменной `$timeDelete` указывается время в секундах. Относительно этого времени выбираются файлы для удаления. В примере выше указано 60*60*24*30 (60секунд * 60минут * 24часа * 30 дней). Соответсвенной из папки будут удалены все файлы, которые были созданы более месяца назад.